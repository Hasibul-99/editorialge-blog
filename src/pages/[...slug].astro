---
import { changeLanguage } from "i18next";
import Breadcrumb from "@/components/common/Breadcrumb.astro";
import Layout from "../layouts/Layout.astro";
import SidebarWrap from "@/components/sidebar-wrap/index.astro";

changeLanguage("en");

export const prerender = true;

export const getStaticPaths = async () => {
  const response = await fetch("http://localhost:1337/graphql", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Accept: "application/json",
    },
    body: JSON.stringify({
        query: `{
        posts(filters: {status: {eq: true}}) {
            data {
                attributes {
                slug
                }
            }
            }
        }`,
    }),
  });

  const slugs = await response.json();

  let contents: any = [];

  for (let i = 0; i < slugs.data.posts.data.length; i++) {
    const slug = slugs.data.posts.data[i].attributes.slug;

    console.log("item--", slug);

    const res = await fetch("http://localhost:1337/graphql", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Accept: "application/json",
      },
      body: JSON.stringify({
        query: `{
            posts(filters: {slug: {eq: "10-ways-to-reduce-your-stress-this-year"}, status: {eq: true}}) {
                data {
                id
                attributes {
                    createdBy {
                    id
                    firstname
                    lastname
                    }
                    title_en
                    title_bn
                    breadcrumb_en
                    breadcrumb_bn
                    content_first_en
                    content_first_bn
                    content_sec_en
                    content_sec_bn
                    rating
                    category {
                        data {
                        attributes {
                        title_en
                        title_bn
                        slug
                        }
                    }
                    }
                    tags {
                    data {
                        attributes {
                        title_en
                        title_bn
                        }
                    }
                    }
                    createdAt
                    PublishedDate
                    updatedAt
                    description
                    keywords
                    image {
                    data {
                        attributes {
                        url
                        width
                        height
                        }
                    }
                    }
                }
                }
            }
        }`,
      }),
    });

    const data = await res.json();

    contents.push({
        params: { slug },
        props: data?.data.posts.data[0],
    })
  }

  return contents;
};

type Props = any;
const { id, attributes } = Astro.props;
---

<Layout title="Welcome to Astro.">
  <Breadcrumb />

  <!-- blog-details-area -->
  <section class="blog-details-area pt-60 pb-60">
    <div class="container">
      <div class="author-inner-wrap">
        <div class="row justify-content-center">
          <div class="col-70">
            <div class="blog-details-wrap">
              <div class="blog-details-content">
                <div class="blog-details-content-top">
                  <a href="blog.html" class="post-tag">Appitizer</a>
                  <h2 class="title">
                    {attributes.title_en}
                  </h2>
                  <div class="bd-content-inner">
                    <div class="blog-post-meta">
                      <ul class="list-wrap">
                        <li>
                          <i class="flaticon-user"></i>by<a href="author.html"
                            >Admin</a>
                        </li>
                        <li>
                          <i class="flaticon-calendar"></i>27 August, 2024
                        </li>
                        <li>
                          <i class="flaticon-chat"></i><a
                            href="blog-details.html">05 Comments</a>
                        </li>
                        <li><i class="flaticon-history"></i>20 Mins</li>
                      </ul>
                    </div>
                    <div class="blog-details-social">
                      <ul class="list-wrap">
                        <li>
                          <a href="#"><i class="fab fa-facebook-f"></i></a>
                        </li>
                        <li><a href="#"><i class="fab fa-twitter"></i></a></li>
                        <li>
                          <a href="#"><i class="fab fa-instagram"></i></a>
                        </li>
                        <li>
                          <a href="#"><i class="fab fa-linkedin-in"></i></a>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="blog-details-thumb">
                  <img src="assets/img/blog/blog_details01.jpg" alt="" />
                </div>
                <p class="first-info">
                  Browned butter and brown sugar caramelly oodness crispy
                  edgesthick and soft centers andey melty little puddles of
                  chocolate y first favorite.dolor sit amet, consectetuer
                  adipiscing elitter Aenean commodo ligula eget dolor Aenean
                  massa.
                </p>
                <p>
                  Growned butter and brown sugar caramelly oodness crispy
                  edgesthick and soft centers andey meltpuddles of chocolate y
                  first favorite.dolor sit amet, consectetuer adipiscing elitter
                  Aenean commodo ligula eget doloawr Aenean massa.m Ipsum has
                  been the industry’s standard dummy.
                </p>
                <blockquote>
                  <p>
                    Grursus mal suada faci lisis orem ipsum dola onsectetur
                    elittery Vestey bulum the ipsumm ipsum that dolocons rsus
                    mal suada and there fadolorit to the consectetur elite.
                  </p>
                  <cite>Thomas A. Edison</cite>
                </blockquote>
                <p>
                  Growned butter and brown sugar caramelly oodness crispy
                  edgesthick and soft centers andey meltpuddles offer chocolate
                  y first favorite.dolor sit amet, consectetuer adipiscing
                  elitter Aenean commodo ligula egette doloawr Aenean massa.m
                  Ipsum has been the industry’s standard dummy.should never
                  complain, complaining is a weak emotion, you got life, we
                  breathing, we blessed. Surround yourself with angels.
                </p>
                <div class="blog-details-inner">
                  <div class="row align-items-center">
                    <div class="col-md-6">
                      <div class="blog-details-inner-img">
                        <img src="assets/img/blog/blog_details02.jpg" alt="" />
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="blog-details-inner-content">
                        <h3 class="title-two">
                          Customer Engagement Marketing New Strategy for the
                          Economy
                        </h3>
                        <p>
                          Pellentesque iaculis gravida nulla ac hendrerit
                          Vestiabulum faucibus neque at lacus tristique eu
                          ultrices area ipsum mollis Praesent pharetra semper
                          purusPellentesque iaculis gravida nulla ac hendrerit.
                        </p>
                        <ul class="list-wrap">
                          <li>
                            <i class="fas fa-check"></i>Gutenberg Integration
                          </li>
                          <li>
                            <i class="fas fa-check"></i>Gutenberg Integration
                          </li>
                          <li>
                            <i class="fas fa-check"></i>Gutenberg Integration
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
                <p>
                  Growned butter and brown sugar caramelly oodness crispy
                  edgesthick and soft centers andey meltpuddles offer chocolate
                  y first favorite.dolor sit amet, consectetuer adipiscing
                  elitter Aenean commodo ligula egette doloawr Aenean massa.m
                  Ipsum has been the industry’s standard dummy.should never
                  complain, complaining is a weak emotion, you got life, we
                  breathing, we blessed. Surround yourself with angels.
                </p>
                <div class="blog-details-video">
                  <img src="assets/img/blog/blog_details03.jpg" alt="" />
                  <a
                    href="https://www.youtube.com/watch?v=G_AEL-Xo5l8"
                    class="paly-btn popup-video"><i class="fas fa-play"></i></a
                  >
                </div>
                <p>
                  Growned butter and brown sugar caramelly oodness crispy
                  edgesthick and soft centers andey meltpuddles offer chocolate
                  y first favorite.dolor sit amet, consectetuer adipiscing
                  elitter Aenean commodo ligula egette doloawr Aenean massa.m
                  Ipsum has been the industry’s standard dummy.should never
                  complain, complaining is a weak emotion, you got life, we
                  breathing, we blessed. Surround yourself with angels.
                </p>
                <div class="blog-details-bottom">
                  <div class="row align-items-center">
                    <div class="col-lg-6">
                      <div class="post-tags">
                        <h5 class="title">Tags:</h5>
                        <ul class="list-wrap">
                          <li><a href="blog.html">Art & Design</a></li>
                          <li><a href="blog.html">Video</a></li>
                        </ul>
                      </div>
                    </div>
                    <div class="col-lg-6">
                      <div class="post-share">
                        <h5 class="title">Share:</h5>
                        <ul class="list-wrap">
                          <li>
                            <a href="#"><i class="fab fa-facebook-f"></i></a>
                          </li>
                          <li>
                            <a href="#"><i class="fab fa-twitter"></i></a>
                          </li>
                          <li>
                            <a href="#"><i class="fab fa-instagram"></i></a>
                          </li>
                          <li>
                            <a href="#"><i class="fab fa-linkedin-in"></i></a>
                          </li>
                          <li>
                            <a href="#"><i class="fab fa-youtube"></i></a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="blog-avatar-wrap mb-50">
                <div class="blog-avatar-img">
                  <a href="#"
                    ><img src="assets/img/images/avatar.png" alt="img" /></a
                  >
                </div>
                <div class="blog-avatar-info">
                  <span class="designation">Author</span>
                  <h4 class="name">
                    <a href="author.html">Cameron Williamson</a>
                  </h4>
                  <p>
                    Finanappreciate your trust greatly Our clients choose
                    dentace ducts because kneer ow we are the best area
                    Awaitingare really.
                  </p>
                </div>
              </div>
              <div class="pev-next-post-wrap">
                <div class="row">
                  <div class="col-md-6">
                    <div class="post-item">
                      <div class="thumb">
                        <a href="blog-details.html"
                          ><img src="assets/img/blog/bd_post01.jpg" alt="" /></a
                        >
                      </div>
                      <div class="content">
                        <span>Previous Post</span>
                        <h5 class="post-title">
                          <a href="blog-details.html"
                            >Make May Magnificent <br /> Wallpapers Edition</a>
                        </h5>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="post-item next-post">
                      <div class="thumb">
                        <a href="blog-details.html"
                          ><img src="assets/img/blog/bd_post02.jpg" alt="" /></a
                        >
                      </div>
                      <div class="content">
                        <span>Next Post</span>
                        <h5 class="post-title">
                          <a href="blog-details.html"
                            >Write Better By Borrowing <br /> Ideas JavaScript Functions</a>
                        </h5>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="comments-wrap">
                <h3 class="comments-wrap-title">02 Comments</h3>
                <div class="latest-comments">
                  <ul class="list-wrap">
                    <li>
                      <div class="comments-box">
                        <div class="comments-avatar">
                          <img
                            src="assets/img/images/comment01.png"
                            alt="img"
                          />
                        </div>
                        <div class="comments-text">
                          <div class="avatar-name">
                            <h6 class="name">Alebary keon</h6>
                            <span class="date">27 August, 2024</span>
                          </div>
                          <p>
                            Finanappreciate your trust greatly Our clients
                            choose dentace ducts because know we are the best
                            area Awaitingare really.
                          </p>
                          <a href="#" class="reply-btn">Reply</a>
                        </div>
                      </div>
                      <ul class="children">
                        <li>
                          <div class="comments-box">
                            <div class="comments-avatar">
                              <img
                                src="assets/img/images/comment02.png"
                                alt="img"
                              />
                            </div>
                            <div class="comments-text">
                              <div class="avatar-name">
                                <h6 class="name">Lukas Javeb</h6>
                                <span class="date">27 August, 2024</span>
                              </div>
                              <p>
                                Finanappreciate your trust greatly Our clients
                                choose dentace ducts because know we are the
                                best area Awaitingare really.
                              </p>
                              <a href="#" class="reply-btn">Reply</a>
                            </div>
                          </div>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="comment-respond">
                <h3 class="comment-reply-title">Post a comment</h3>
                <form action="#" class="comment-form">
                  <p class="comment-notes">
                    Your email address will not be published. Required fields
                    are marked *
                  </p>
                  <div class="form-grp">
                    <textarea name="comment" placeholder="Comment"></textarea>
                  </div>
                  <div class="row">
                    <div class="col-md-4">
                      <div class="form-grp">
                        <input type="text" placeholder="Name" />
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-grp">
                        <input type="email" placeholder="Email" />
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-grp">
                        <input type="url" placeholder="Website" />
                      </div>
                    </div>
                  </div>
                  <div class="form-grp checkbox-grp">
                    <input type="checkbox" id="checkbox_two" />
                    <label for="checkbox_two"
                      >Save my name, email, and website in this browser for the
                      next time I comment.</label
                    >
                  </div>
                  <button type="submit" class="btn btn-two">Post Comment</button
                  >
                </form>
              </div>
            </div>
          </div>
          <div class="col-30">
            <SidebarWrap />
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- blog-details-area-end -->
</Layout>
